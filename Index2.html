<!DOCTYPE html>
<html>
<head>
  <meta charset="UTF-8">
  <title>Start Payment</title>
  <style>
    body {
      font-family: Arial, sans-serif;
      display: flex;
      height: 100vh;
      align-items: center;
      justify-content: center;
      background: #f5f5f5;
    }
    #pay {
      padding: 12px 24px;
      font-size: 18px;
      border: none;
      border-radius: 4px;
      background: #635bff;
      color: white;
      cursor: pointer;
    }
    #pay:disabled {
      background: #aaa;
      cursor: not-allowed;
    }
  </style>
</head>
<body>
  <button id="pay">Pay Now</button>

  <script>
    const button = document.getElementById("pay");

    button.onclick = function() {
      button.disabled = true;
      button.textContent = "Starting payment...";

      fetch("https://hook.us2.make.com/bc77gdh1aiq1vcph9jrve4gxd53evmv1")
        .then(response => response.json())
        .then(data => {
          if (!data.url) {
            alert("No payment URL returned.");
            console.error("Response did not contain .url:", data);
            button.disabled = false;
            button.textContent = "Pay Now";
            return;
          }
          window.location.href = data.url;
        })
        .catch(err => {
          console.error("Error starting payment session:", err);
          alert("Could not start payment session.");
          button.disabled = false;
          button.textContent = "Pay Now";
        });
    };
  </script>
</body>
</html>
